(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,a){e.exports=a(32)},24:function(e,t,a){},25:function(e,t,a){},26:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(17),r=a.n(o),l=(a(24),a(3)),i=(a(25),a(26),a(4)),s=function(){var e=Object(n.useContext)(j),t=e.state;e.dispatch;return c.a.createElement("nav",null,c.a.createElement("div",{className:"nav-wrapper blue Lighten-4"},c.a.createElement(i.b,{to:t?"/":"/signin",className:"brand-logo left"},"InstaNote"),c.a.createElement("ul",{id:"nav-mobile",className:"right"},t?[c.a.createElement("li",null,c.a.createElement(i.b,{to:"/profile"},"Profile")),c.a.createElement("li",null,c.a.createElement(i.b,{to:"/create"},"Create Post"))]:[c.a.createElement("li",null,c.a.createElement(i.b,{to:"/signin"},"Signin")),c.a.createElement("li",null,c.a.createElement(i.b,{to:"/signup"},"Signup"))])))},u=a(1),m=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],o=t[1];return Object(n.useEffect)(function(){fetch("/allpost",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then(function(e){return e.json()}).then(function(e){console.log(e),o(e.posts)})},[]),c.a.createElement("div",{className:"home"},a.map(function(e){return c.a.createElement("div",{className:"card home-card",key:e._id},c.a.createElement("h5",null,e.postedBy.name),c.a.createElement("div",{className:"card-image"},c.a.createElement("img",{src:e.image})),c.a.createElement("div",{className:"card-content"},c.a.createElement("i",{className:"material-icons",style:{color:"red"}},"favorite"),c.a.createElement("h6",null,e.title),c.a.createElement("p",null,e.body),c.a.createElement("input",{type:"text",placeholder:"add a comment"})))}))};a(31);var p=function(e){var t=e.children,a=e.onClick;return c.a.createElement("button",{onClick:a,className:"btn waves-effect waves-light"},t)},d=a(8),h=a.n(d),f=function(){var e=Object(n.useContext)(j),t=(e.state,e.dispatch),a=Object(u.f)(),o=Object(n.useState)(""),r=Object(l.a)(o,2),s=r[0],m=r[1],d=Object(n.useState)(""),f=Object(l.a)(d,2),g=f[0],E=f[1];return c.a.createElement("div",{className:"mycard"},c.a.createElement("div",{className:"card auth-card"},c.a.createElement("h2",null,"InstaNote"),c.a.createElement("input",{type:"text",placeholder:"email",value:s,onChange:function(e){return m(e.target.value)}}),c.a.createElement("input",{type:"text",placeholder:"password",value:g,onChange:function(e){return E(e.target.value)}}),c.a.createElement(p,{onClick:function(){/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(s)?fetch("/signin",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:g,email:s})}).then(function(e){return e.json()}).then(function(e){console.log(e),e.error?h.a.toast({html:e.error}):(localStorage.setItem("jwt",e.token),localStorage.setItem("user",JSON.stringify(e.user)),t({type:"User",payload:e.user}),h.a.toast({html:"Sign in success"}),a.push("/"))}).catch(function(e){console.log(e)}):h.a.toast({html:"invalid email"})}},"Sign In"),c.a.createElement("br",null),c.a.createElement(i.b,{to:"/signup"},"No account yet? Sign Up.")))},g=function(){return c.a.createElement("div",{style:{maxWidth:"640px",margin:"0px auto"}},c.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",margin:"10px",borderBottom:"1px solid black"}},c.a.createElement("div",null,c.a.createElement("img",{style:{width:"140px",height:"140px",borderRadius:"70px",padding:"5px"},src:"https://images.unsplash.com/photo-1522196772883-393d879eb14d?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1182&q=80"})),c.a.createElement("div",null,c.a.createElement("h4",null,"Astrid Suhartono"),c.a.createElement("div",{style:{justifyContent:"space-between"}},c.a.createElement("h5",null,"astrid@mail.com"),c.a.createElement("h5",null,"3 posts")))),c.a.createElement("div",{className:"gallery"},c.a.createElement("img",{className:"item",src:"https://images.unsplash.com/photo-1508739773434-c26b3d09e071?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80"}),c.a.createElement("img",{className:"item",src:"https://images.unsplash.com/photo-1476820865390-c52aeebb9891?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80"}),c.a.createElement("img",{className:"item",src:"https://images.unsplash.com/photo-1498550744921-75f79806b8a7?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80"})))},E=function(){var e=Object(u.f)(),t=Object(n.useState)(""),a=Object(l.a)(t,2),o=a[0],r=a[1],s=Object(n.useState)(""),m=Object(l.a)(s,2),d=m[0],f=m[1],g=Object(n.useState)(""),E=Object(l.a)(g,2),b=E[0],v=E[1];return c.a.createElement("div",{className:"mycard"},c.a.createElement("div",{className:"card auth-card"},c.a.createElement("h2",null,"InstaNote"),c.a.createElement("input",{type:"text",placeholder:"name",value:o,onChange:function(e){return r(e.target.value)}}),c.a.createElement("input",{type:"text",placeholder:"email",value:d,onChange:function(e){return f(e.target.value)}}),c.a.createElement("input",{type:"text",placeholder:"password",value:b,onChange:function(e){return v(e.target.value)}}),c.a.createElement(p,{onClick:function(){/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(d)?fetch("/signup",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o,password:b,email:d})}).then(function(e){return e.json()}).then(function(t){t.error?h.a.toast({html:t.error}):(h.a.toast({html:t.message}),e.push("/signin"))}).catch(function(e){console.log(e)}):h.a.toast({html:"invalid email"})}},"Sign Up"),c.a.createElement("br",null),c.a.createElement(i.b,{to:"/signin"},"Have an account? Sign In.")))},b=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)(""),i=Object(l.a)(r,2),s=i[0],m=i[1],d=Object(n.useState)(""),f=Object(l.a)(d,2),g=f[0],E=f[1],b=Object(n.useState)(""),v=Object(l.a)(b,2),y=v[0],j=v[1],w=Object(u.f)();Object(n.useEffect)(function(){y&&fetch("/createpost",{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({title:a,body:s,picture:y})}).then(function(e){return e.json()}).then(function(e){console.log(e),e.error?h.a.toast({html:e.error}):(h.a.toast({html:"New post successfully added"}),w.push("/"))}).catch(function(e){console.log(e)})},[y]);return c.a.createElement("div",{className:"card post-card input-field"},c.a.createElement("input",{type:"text",placeholder:"title",value:a,onChange:function(e){return o(e.target.value)}}),c.a.createElement("input",{type:"text",placeholder:"body",value:s,onChange:function(e){return m(e.target.value)}}),c.a.createElement("div",{className:"file-field input-field"},c.a.createElement("div",{className:"btn"},c.a.createElement("span",null,"Image"),c.a.createElement("input",{type:"file",onChange:function(e){return E(e.target.files[0])}})),c.a.createElement("div",{className:"file-path-wrapper"},c.a.createElement("input",{className:"file-path validate",type:"text"}))),c.a.createElement(p,{onClick:function(){var e=new FormData;e.append("file",g),e.append("upload_preset","instanote"),e.append("cloud_name","bootcamp-instanote"),fetch("https://api.cloudinary.com/v1_1/bootcamp-instanote/image/upload",{method:"post",body:e}).then(function(e){return e.json()}).then(function(e){j(e.url)}).catch(function(e){console.log(e)})}},"Submit Post"))},v=null,y=function(e,t){return"USER"==t.type?t.payload:e},j=Object(n.createContext)(),w=function(){var e=Object(u.f)(),t=Object(n.useContext)(j),a=(t.state,t.dispatch);return Object(n.useEffect)(function(){var t=JSON.parse(localStorage.getItem("user"));t?(a({type:"USER",payload:t}),e.push("/")):e.push("/signin")},[]),c.a.createElement(u.c,null,c.a.createElement(u.a,{exact:!0,path:"/"},c.a.createElement(m,null)),c.a.createElement(u.a,{path:"/signin"},c.a.createElement(f,null)),c.a.createElement(u.a,{path:"/signup"},c.a.createElement(E,null)),c.a.createElement(u.a,{path:"/profile"},c.a.createElement(g,null)),c.a.createElement(u.a,{path:"/create"},c.a.createElement(b,null)))};var O=function(){var e=Object(n.useReducer)(y,v),t=Object(l.a)(e,2),a=t[0],o=t[1];return c.a.createElement(j.Provider,{value:{state:a,dispatch:o}},c.a.createElement(i.a,null,c.a.createElement(s,null),c.a.createElement(w,null)))},x=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function N(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(c.a.createElement(O,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");x?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):N(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):N(e)})}}()}},[[19,1,2]]]);
//# sourceMappingURL=main.1d7743a7.chunk.js.map